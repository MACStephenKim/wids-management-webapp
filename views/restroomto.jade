extends layout

block content
    div(ng-app="angularrestroom")
        div(ng-controller="restroomController")
            a(ng-show='logged', href='/login')
                |  Log In
            a(ng-show='loggedout', href='/logout')
                |  Log Out
            | &nbsp;
            | &nbsp;
            | &nbsp;
            | &nbsp;
            | &nbsp;
            | &nbsp;
            | &nbsp;
            | &nbsp;
            | &nbsp;
            | &nbsp;
            | &nbsp;
            | &nbsp;
            | &nbsp;
            | &nbsp;
            | &nbsp;
            | &nbsp;
            | &nbsp;
            | &nbsp;
            | &nbsp;
            | &nbsp;
            | &nbsp;
            | &nbsp;
            | &nbsp;
            | &nbsp;
            | &nbsp;
            | &nbsp;
            | &nbsp;
            | &nbsp;
            | &nbsp;
            | &nbsp;
            | &nbsp;
            | &nbsp;
            | &nbsp;
            | &nbsp;
            | &nbsp;
            | &nbsp;
            | &nbsp;
            | &nbsp;
            | &nbsp;
            | &nbsp;
            | &nbsp;
            | &nbsp;
            | &nbsp;
            | &nbsp;
            | &nbsp;
            | &nbsp;
            | &nbsp;
            | &nbsp;
            | &nbsp;
            | &nbsp;
            | &nbsp;
            | &nbsp;
            | &nbsp;
            | &nbsp;
            | &nbsp;
            | &nbsp;
            | &nbsp;
            | &nbsp;
            | &nbsp;
            | &nbsp;
            | &nbsp;
            | &nbsp;
            | &nbsp;
            | &nbsp;
            | &nbsp;
            | &nbsp;
            | &nbsp;
            | &nbsp;
            | &nbsp;
            | &nbsp;
            | &nbsp;
            | &nbsp;
            | &nbsp;
            | &nbsp;
            | &nbsp;
            | &nbsp;
            | &nbsp;
            | &nbsp;
            | &nbsp;
            | &nbsp;
            | &nbsp;
            | &nbsp;
            | &nbsp;
            | &nbsp;
            | &nbsp;
            | &nbsp;
            | &nbsp;
            | &nbsp;
            | &nbsp;
            | &nbsp;
            | &nbsp;
            | &nbsp;
            | &nbsp;
            | &nbsp;
            | &nbsp;
            | &nbsp;
            | &nbsp;
            | &nbsp;
            | &nbsp;
            | &nbsp;
            | &nbsp;
            | &nbsp;
            | &nbsp;
            | &nbsp;
            if isAuthenticated
                if (typeof(newmessage) === 'undefined')
                    | Welcome user:
                    | &nbsp;
                    = username
            if (typeof(newmessage) !== 'undefined')
                | #{newmessage}
            nav.navbar.navbar-toggleable-md.navbar-light.bg-faded
                #navbarSupportedContent.collapse.navbar-collapse
                    ul.nav.nav-tabs
                        li.nav-item
                            a.nav-link(href='/')
                                |  Home
                        li.nav-item.active
                            a.nav-link(href='/restrooms')
                                |  Restrooms
                        li.nav-item   
                            a.nav-link(href='/statuses')
                                |  Statuses
                        li.nav-item
                            a.nav-link(href='/headcounts')
                                |  Headcounts
                        li.nav-item
                            a.nav-link(href='/actions')
                                |  Actions
            //Add icon
            a.plus(ng-show='showadd', tooltip='Add more', ng-click='showForm = true; showdelete = false', href='javascript:void(0);', ng-model='skm')
                i.icon-plus
                | + ADD
            
            //Search icon
            a.search(tooltip='Add more', ng-click='showSearch = true; removesearch = true', href='javascript:void(0);', ng-model='skm')
                span.glyphicon.glyphicon-search 
            
            // FORM TO CREATE Restroom
            #todo-form.row
                form.form-group(ng-show='showForm', name="addForm", role='form', novalidate)
                    // BIND THIS VALUE TO formData IN ANGULAR
                    label Door Number
                        | &nbsp;
                        label(ng-class='{red : true}') 
                            |*
                    input.form-control.input-lg(type='text', name='door', ng-model='formData.door_number', placeholder='Door Number', required)
                    .custom-error(ng-show='addForm.door.$dirty && addForm.door.$invalid') Invalid: 
                        span(ng-show='addForm.door.$error.required') Door Number is required. 
                    label Description
                    input.form-control.input-lg(type='text', ng-model='formData.description', placeholder='Description') 
                    label Terminal
                        | &nbsp;
                        label(ng-class='{red : true}') 
                            |*
                    br
                    input(type="radio", name="terminal", value="T1-Lindbergh", ng-model='formData.terminal', required)
                    | T1-Lindbergh
                    | &nbsp;
                    | &nbsp;
                    | &nbsp;
                    | &nbsp;
                    | &nbsp;
                    input(type="radio", name="terminal", value="T2-Humphrey", ng-model='formData.terminal', required)
                    | T2-Humphrey
                    br
                    br
                    label Arrow Direction
                        | &nbsp;
                        label(ng-class='{red : true}') 
                            |*
                    br
                    select(name='arrow_direction' ng-model='formData.arrow_direction')
                        option(value='left', name="arrow_direction", required) left
                        option(value='right', name="arrow_direction", required) right 
                    br
                    br
                    label Update User
                        | &nbsp;
                        label(ng-class='{red : true}') 
                            |*
                    br
                    input.form-control.input-lg(type='text', name='user', ng-model='formData.update_user', placeholder='User', required)
                    .custom-error(ng-show='addForm.user.$dirty && addForm.user.$invalid') Invalid: 
                        span(ng-show='addForm.user.$error.required') Update User is required. 
                    
                    // createRestroom() WILL CREATE NEW Restroom
                    button.btn.btn-primary.btn-lg(type='submit', ng-click='createRestroom()', ng-disabled='addForm.user.$pristine || addForm.user.$dirty && addForm.user.$invalid || addForm.door.$pristine || addForm.door.$dirty && addForm.door.$invalid') Add
                    button.btn.btn-primary.btn-lg(type='submit', ng-click='cancelRestroom()') Cancel

            // FORM TO Update Restroom        
            #todo-form.row
                form.form-group(ng-show='IsVisible', name='updateForm', role='form', novalidate)
                    // BIND THIS VALUE TO formData IN ANGULAR
                    label Door Number
                        | &nbsp;
                        label(ng-class='{red : true}') 
                            |*
                    input.form-control.input-lg(type='text', name='door', ng-model='formupData.door_number', required)
                    .custom-error(ng-show='updateForm.door.$dirty && updateForm.door.$invalid') Invalid: 
                        span(ng-show='updateForm.door.$error.required') Door Number is required.
                    label Description
                    input.form-control.input-lg(type='text', ng-model='formupData.description') 
                    label Terminal
                        | &nbsp;
                        label(ng-class='{red : true}') 
                            |*
                    br
                    input(type="radio", name="terminal", value="T1-Lindbergh", ng-model='formupData.terminal')
                    | T1-Lindbergh
                    | &nbsp;
                    | &nbsp;
                    | &nbsp;
                    | &nbsp;
                    | &nbsp;
                    input(type="radio", name="terminal", value="T2-Humphrey", ng-model='formupData.terminal')
                    | T2-Humphrey
                    br
                    br
                    label Arrow Direction
                        | &nbsp;
                        label(ng-class='{red : true}') 
                            |*
                    br
                    select(name='arrow_direction' ng-model='formupData.arrow_direction')
                        option(value='left', name="arrow_direction") left
                        option(value='right', name="arrow_direction") right
                    br
                    br
                    label Update User
                        | &nbsp;
                        label(ng-class='{red : true}') 
                            |*
                    br
                    input.form-control.input-lg(type='text', name='user', ng-model='formupData.update_user', required)
                    .custom-error(ng-show='updateForm.user.$dirty && updateForm.user.$invalid') Invalid: 
                        span(ng-show='updateForm.user.$error.required') Update User is required. 

                    button.btn.btn-primary.btn-lg(type='submit', ng-click='updateRestroom(formupData)', ng-disabled='updateForm.door.$dirty && updateForm.door.$invalid || updateForm.user.$dirty && updateForm.user.$invalid') Update
                    button.btn.btn-primary.btn-lg(type='submit', ng-click='cancelupdateRestroom()') Cancel
                      

            br
            #restroomList
                div
                    label(ng-show='showSearch')
                        | Search
                        | &nbsp;
                        input(ng-model='searchKeyword')
                        | &nbsp;
                        a#search(ng-show='removesearch', tooltip='Add more', ng-click='showSearch = false; removeserach = false; searchClear()', href='javascript:void(0);', ng-model='skm')
                            i.icon-plus
                            | X
                // /SEARCH CONTAINER
                table
                    thead
                        tr
                            th 
                                a(href='#', ng-click="orderByField='restroom_id'; reverseSort = !reverseSort")
                                    | Restroom_ID
                                    span(ng-show="orderByField == 'restroom_id'")
                                        span.glyphicon.glyphicon-arrow-up(ng-show='!reverseSort')
                                        span.glyphicon.glyphicon-arrow-down(ng-show='reverseSort')
                            th
                                a(href='#', ng-click="orderByField='door_number'; reverseSort = !reverseSort")
                                    | Door_Number
                                    span(ng-show="orderByField == 'door_number'")
                                        span.glyphicon.glyphicon-arrow-up(ng-show='!reverseSort')
                                        span.glyphicon.glyphicon-arrow-down(ng-show='reverseSort')
                            th 
                                a(href='#', ng-click="orderByField='description'; reverseSort = !reverseSort")
                                    | Description
                                    span(ng-show="orderByField == 'description'")
                                        span.glyphicon.glyphicon-arrow-up(ng-show='!reverseSort')
                                        span.glyphicon.glyphicon-arrow-down(ng-show='reverseSort')
                            th 
                                a(href='#', ng-click="orderByField='terminal'; reverseSort = !reverseSort")
                                    | Terminal
                                    span(ng-show="orderByField == 'terminal'")
                                        span.glyphicon.glyphicon-arrow-up(ng-show='!reverseSort')
                                        span.glyphicon.glyphicon-arrow-down(ng-show='reverseSort')
                            th 
                                a(href='#', ng-click="orderByField='update_date'; reverseSort = !reverseSort")
                                    | Update_Date
                                    span(ng-show="orderByField == 'update_date'")
                                        span.glyphicon.glyphicon-arrow-up(ng-show='!reverseSort')
                                        span.glyphicon.glyphicon-arrow-down(ng-show='reverseSort')
                            th 
                                a(href='#', ng-click="orderByField='update_user'; reverseSort = !reverseSort")
                                    | Update_User
                                    span(ng-show="orderByField == 'update_user'")
                                        span.glyphicon.glyphicon-arrow-up(ng-show='!reverseSort')
                                        span.glyphicon.glyphicon-arrow-down(ng-show='reverseSort')
                            th(ng-show='showdelete') Update/Delete
                    tbody
                        tr(ng-repeat='item in restroom = (restrooms | filter: searchKeyword) | orderBy:[orderByField]:reverseSort | startFrom:(currentPage-1)*itemsPerPage | limitTo:itemsPerPage')
                            td 
                                {{item.restroom_id}}
                            td
                                {{item.door_number}}
                            td
                                {{item.description}}
                            td
                                {{item.terminal}}
                            td
                                {{item.update_date}}
                            td
                                {{item.update_user}}
                            td(ng-show='showdelete')
                                a(href='#', ng-click='populateFields(item)')
                                    span.glyphicon.glyphicon-pencil
                                | &nbsp;
                                | &nbsp; 
                                a.paint(ng-click='deleteRestroom(item)', ng-model="item.isChecked" , tooltip='Add more', href='javascript:void(0);')
                                    i.icon-plus
                                    | X
                //Pagination
                | View 
                select(ng-model='viewby', name='amount', ng-change='setItemsPerPage(viewby)')
                    option 3
                    option 5
                    option(value='10',name='amount') 10
                    option 20
                    option 30
                    option 40
                    option 50
                |  records at a time.
                uib-pagination(total-items='restroom.length', ng-model='currentPage', boundary-link-numbers="true", items-per-page='itemsPerPage', boundary-links="true", max-size=5, rotate="true", num-pages='numPages')
            // /RESTROOM LIST                

block scripts
    link(rel='stylesheet', href='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css')

    link(data-require='bootstrap-css@*', data-semver='4.0.0-alpha.2', rel='stylesheet', href='https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.2/css/bootstrap.min.css')
    script.
      document.write('<base href="' + document.location + '" />');
    //- script(data-require='angular.js@1.4.x', src='https://code.angularjs.org/1.4.9/angular.js', data-semver='1.4.9')
    //- script(data-require='ui-bootstrap@*', data-semver='1.3.2', src='https://cdn.rawgit.com/angular-ui/bootstrap/gh-pages/ui-bootstrap-tpls-1.3.2.js')

    script(data-require='angular.js@1.4.x', src='dist/js/vendor.min.js', data-semver='1.4.9')
    script(data-require='ui-bootstrap@*', data-semver='1.3.2', src='dist/js/vendor.min.js')

    //- script(src='http://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular.min.js')
    //- script(src='http://ui-grid.info/release/ui-grid.js')
    //- link(rel='stylesheet', href='http://ui-grid.info/release/ui-grid.css', type='text/css')

    //- script(src="//ajax.googleapis.com/ajax/libs/angularjs/1.4.5/angular.min.js")
    //- script(src="//ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js")
    //- script(src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js")
    //- script(src="javascripts/app/app.js")
    script(src="dist/js/bundle.min.js")
